{"ast":null,"code":"import _regeneratorRuntime from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport { VRow, VCol, VDivider, VChip } from 'vuetify/lib';\nimport categoriesDefs from '../categories.json';\nexport default {\n  components: {\n    VRow: VRow,\n    VCol: VCol,\n    VDivider: VDivider,\n    VChip: VChip\n  },\n  props: {\n    settings: {\n      type: Object,\n      \"default\": function _default() {}\n    },\n    selectedTab: {\n      type: String,\n      \"default\": undefined\n    }\n  },\n  data: function data() {\n    return {\n      site: null,\n      // the site to lookup for\n      resultCategories: [],\n      // the lookup result array\n      lookupError: null,\n      loading: false\n    };\n  },\n  computed: {\n    /**\n     * combines categories defs, settings and results for display\n     */\n    matchedCategories: function matchedCategories() {\n      var _this = this;\n      if (!this.resultCategories) return null;\n      var matchedCategories = [];\n      this.resultCategories.forEach(function (catId) {\n        var cDef = categoriesDefs.find(function (c) {\n          return c.id === catId;\n        });\n        var cSetting = _this.settings.categories.find(function (c) {\n          return c.id === catId;\n        });\n        matchedCategories.push({\n          def: cDef,\n          settings: cSetting\n        });\n      });\n      return matchedCategories.length ? matchedCategories : undefined;\n    }\n  },\n  watch: {\n    selectedTab: function selectedTab(value) {\n      if (value !== 'site_lookup') {\n        this.site = null;\n        this.resultCategories = [];\n        this.lookupError = null;\n      }\n    },\n    site: function site(value) {\n      if (!value) {\n        this.resultCategories = [];\n        this.lookupError = null;\n      }\n    }\n  },\n  methods: {\n    onLookup: function onLookup() {\n      var _this2 = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this2.resultCategories = [];\n              _this2.lookupError = null;\n              _this2.loading = true;\n              _context.next = 5;\n              return _this2.$emit('lookup', {\n                site: _this2.site,\n                resolve: function resolve(res) {\n                  var _res$;\n                  _this2.loading = false;\n                  if (res.error) {\n                    _this2.lookupError = res.error;\n                    return;\n                  }\n                  var ids = (_res$ = res[0]) === null || _res$ === void 0 || (_res$ = _res$.cats) === null || _res$ === void 0 ? void 0 : _res$.map(function (_ref) {\n                    var cat = _ref.cat;\n                    return cat;\n                  });\n                  _this2.resultCategories = ids || [];\n                }\n              });\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["VRow","VCol","VDivider","VChip","categoriesDefs","components","props","settings","type","Object","default","selectedTab","String","undefined","data","site","resultCategories","lookupError","loading","computed","matchedCategories","_this","forEach","catId","cDef","find","c","id","cSetting","categories","push","def","length","watch","value","methods","onLookup","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$emit","resolve","res","_res$","error","ids","cats","map","_ref","cat","stop"],"sources":["node_modules/vuntangle/src/shared/SettingsWebFilter/components/SiteLookup.vue"],"sourcesContent":["<template>\n  <div>\n    <h3>{{ $t('site_lookup') }}</h3>\n    <p>{{ $t('site_lookup_description') }}</p>\n\n    <v-row no-gutters>\n      <v-col>\n        <u-text-field\n          v-model=\"site\"\n          :disabled=\"!settings.enabled\"\n          :label=\"$t('enter_site_domain')\"\n          clearable\n          @keyup.enter=\"onLookup\"\n        />\n      </v-col>\n      <v-col class=\"shrink\">\n        <u-btn :disabled=\"!site || !settings.enabled\" :loading=\"loading\" height=\"40\" class=\"ml-4\" @click=\"onLookup\">\n          {{ $t('lookup') }}\n        </u-btn>\n      </v-col>\n    </v-row>\n\n    <div v-if=\"site && matchedCategories\" class=\"mt-4\">\n      <u-alert v-if=\"!matchedCategories.length\" class=\"mt-4\">\n        {{ $t('no_matched_categories') }}\n      </u-alert>\n\n      <template v-else>\n        <div>{{ $t('category_match') }}</div>\n        <v-divider class=\"my-2\" />\n\n        <div v-for=\"(mCat, idx) in matchedCategories\" :key=\"idx\">\n          <strong>{{ $t(mCat.def.name) }}</strong> ({{ $t(mCat.def.category) }})\n          <template v-if=\"mCat.settings\">\n            <v-chip\n              v-if=\"mCat.settings.enabled\"\n              x-small\n              color=\"red\"\n              class=\"white--text text-uppercase font-weight-bold mx-2\"\n            >\n              {{ $t('blocked') }}\n            </v-chip>\n            <v-chip\n              v-if=\"mCat.settings.flagged\"\n              x-small\n              color=\"blue\"\n              class=\"white--text text-uppercase font-weight-bold\"\n            >\n              {{ $t('flagged') }}\n            </v-chip>\n          </template>\n          <p class=\"body-2\" style=\"line-height: 1.2\">{{ $t(mCat.def.description) }}</p>\n        </div>\n      </template>\n    </div>\n\n    <u-alert v-if=\"lookupError\" error class=\"mt-4\">\n      {{ $t(lookupError) }}\n    </u-alert>\n  </div>\n</template>\n<script>\n  import { VRow, VCol, VDivider, VChip } from 'vuetify/lib'\n  import categoriesDefs from '../categories.json'\n\n  export default {\n    components: {\n      VRow,\n      VCol,\n      VDivider,\n      VChip,\n    },\n    props: {\n      settings: { type: Object, default: () => {} },\n      selectedTab: { type: String, default: undefined },\n    },\n    data: () => ({\n      site: null, // the site to lookup for\n      resultCategories: [], // the lookup result array\n      lookupError: null,\n      loading: false,\n    }),\n\n    computed: {\n      /**\n       * combines categories defs, settings and results for display\n       */\n      matchedCategories() {\n        if (!this.resultCategories) return null\n        const matchedCategories = []\n        this.resultCategories.forEach(catId => {\n          const cDef = categoriesDefs.find(c => c.id === catId)\n          const cSetting = this.settings.categories.find(c => c.id === catId)\n          matchedCategories.push({\n            def: cDef,\n            settings: cSetting,\n          })\n        })\n        return matchedCategories.length ? matchedCategories : undefined\n      },\n    },\n\n    watch: {\n      selectedTab(value) {\n        if (value !== 'site_lookup') {\n          this.site = null\n          this.resultCategories = []\n          this.lookupError = null\n        }\n      },\n      site(value) {\n        if (!value) {\n          this.resultCategories = []\n          this.lookupError = null\n        }\n      },\n    },\n\n    methods: {\n      async onLookup() {\n        this.resultCategories = []\n        this.lookupError = null\n        this.loading = true\n        await this.$emit('lookup', {\n          site: this.site,\n          resolve: res => {\n            this.loading = false\n            if (res.error) {\n              this.lookupError = res.error\n              return\n            }\n            const ids = res[0]?.cats?.map(({ cat }) => cat)\n            this.resultCategories = ids || []\n          },\n        })\n      },\n    },\n  }\n</script>\n"],"mappings":";;;;;;;;;;;;AA8DA,SAAAA,IAAA,EAAAC,IAAA,EAAAC,QAAA,EAAAC,KAAA;AACA,OAAAC,cAAA;AAEA;EACAC,UAAA;IACAL,IAAA,EAAAA,IAAA;IACAC,IAAA,EAAAA,IAAA;IACAC,QAAA,EAAAA,QAAA;IACAC,KAAA,EAAAA;EACA;EACAG,KAAA;IACAC,QAAA;MAAAC,IAAA,EAAAC,MAAA;MAAA,oBAAAC,SAAA;IAAA;IACAC,WAAA;MAAAH,IAAA,EAAAI,MAAA;MAAA,WAAAC;IAAA;EACA;EACAC,IAAA,WAAAA,KAAA;IAAA;MACAC,IAAA;MAAA;MACAC,gBAAA;MAAA;MACAC,WAAA;MACAC,OAAA;IACA;EAAA;EAEAC,QAAA;IACA;AACA;AACA;IACAC,iBAAA,WAAAA,kBAAA;MAAA,IAAAC,KAAA;MACA,UAAAL,gBAAA;MACA,IAAAI,iBAAA;MACA,KAAAJ,gBAAA,CAAAM,OAAA,WAAAC,KAAA;QACA,IAAAC,IAAA,GAAApB,cAAA,CAAAqB,IAAA,WAAAC,CAAA;UAAA,OAAAA,CAAA,CAAAC,EAAA,KAAAJ,KAAA;QAAA;QACA,IAAAK,QAAA,GAAAP,KAAA,CAAAd,QAAA,CAAAsB,UAAA,CAAAJ,IAAA,WAAAC,CAAA;UAAA,OAAAA,CAAA,CAAAC,EAAA,KAAAJ,KAAA;QAAA;QACAH,iBAAA,CAAAU,IAAA;UACAC,GAAA,EAAAP,IAAA;UACAjB,QAAA,EAAAqB;QACA;MACA;MACA,OAAAR,iBAAA,CAAAY,MAAA,GAAAZ,iBAAA,GAAAP,SAAA;IACA;EACA;EAEAoB,KAAA;IACAtB,WAAA,WAAAA,YAAAuB,KAAA;MACA,IAAAA,KAAA;QACA,KAAAnB,IAAA;QACA,KAAAC,gBAAA;QACA,KAAAC,WAAA;MACA;IACA;IACAF,IAAA,WAAAA,KAAAmB,KAAA;MACA,KAAAA,KAAA;QACA,KAAAlB,gBAAA;QACA,KAAAC,WAAA;MACA;IACA;EACA;EAEAkB,OAAA;IACAC,QAAA,WAAAA,SAAA;MAAA,IAAAC,MAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACAT,MAAA,CAAArB,gBAAA;cACAqB,MAAA,CAAApB,WAAA;cACAoB,MAAA,CAAAnB,OAAA;cAAA0B,QAAA,CAAAE,IAAA;cAAA,OACAT,MAAA,CAAAU,KAAA;gBACAhC,IAAA,EAAAsB,MAAA,CAAAtB,IAAA;gBACAiC,OAAA,WAAAA,QAAAC,GAAA;kBAAA,IAAAC,KAAA;kBACAb,MAAA,CAAAnB,OAAA;kBACA,IAAA+B,GAAA,CAAAE,KAAA;oBACAd,MAAA,CAAApB,WAAA,GAAAgC,GAAA,CAAAE,KAAA;oBACA;kBACA;kBACA,IAAAC,GAAA,IAAAF,KAAA,GAAAD,GAAA,iBAAAC,KAAA,gBAAAA,KAAA,GAAAA,KAAA,CAAAG,IAAA,cAAAH,KAAA,uBAAAA,KAAA,CAAAI,GAAA,WAAAC,IAAA;oBAAA,IAAAC,GAAA,GAAAD,IAAA,CAAAC,GAAA;oBAAA,OAAAA,GAAA;kBAAA;kBACAnB,MAAA,CAAArB,gBAAA,GAAAoC,GAAA;gBACA;cACA;YAAA;YAAA;cAAA,OAAAR,QAAA,CAAAa,IAAA;UAAA;QAAA,GAAAhB,OAAA;MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}