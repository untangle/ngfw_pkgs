{"ast":null,"code":"import _classCallCheck from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-json.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.to-string.js\";\n/**\n * State class\n * manages the grid columns and filters state\n */\nvar State = /*#__PURE__*/function () {\n  /**\n   * State constructor\n   * @param {String} id - the grid id\n   * @param {GridApi} gridApi - the grid api\n   * @param {ColumnApi} columnApi - the column api\n   */\n  function State(id, gridApi, columnApi) {\n    _classCallCheck(this, State);\n    this.gridId = id;\n    this.gridApi = gridApi;\n    this.columnApi = columnApi;\n    this.stateId = null; // the state identifier from local storage\n    this.init();\n  }\n\n  /**\n   * initialize state by adding grid events for which state is saved\n   * compute stateId based on gridId & location pathname\n   */\n  return _createClass(State, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n      // UI-406 remove `/` at the end of id generated by pathname\n      var stateId = this.gridId + '_' + window.location.pathname;\n      this.stateId = stateId.slice(-1) === '/' ? stateId.slice(0, -1) : stateId;\n\n      // register the grid events\n      var events = ['columnVisible', 'columnPinned', 'dragStopped', 'sortChanged', 'filterChanged'];\n      events.forEach(function (evt) {\n        return _this.gridApi.addEventListener(evt, function () {\n          return _this.save();\n        });\n      });\n    }\n\n    // try to load a previously stored state if exists\n  }, {\n    key: \"load\",\n    value: function load() {\n      try {\n        var state = JSON.parse(window.localStorage.getItem(this.stateId));\n        this.gridApi.setFilterModel(state === null || state === void 0 ? void 0 : state.filterModel);\n        this.columnApi.applyColumnState({\n          state: state === null || state === void 0 ? void 0 : state.columnState,\n          applyOrder: true\n        });\n      } catch (e) {}\n    }\n\n    // saves the state into local storage\n  }, {\n    key: \"save\",\n    value: function save() {\n      window.localStorage.setItem(this.stateId, JSON.stringify({\n        filterModel: this.gridApi.getFilterModel(),\n        columnState: this.columnApi.getColumnState()\n      }));\n    }\n  }]);\n}();\nexport { State as default };","map":{"version":3,"names":["State","id","gridApi","columnApi","_classCallCheck","gridId","stateId","init","_createClass","key","value","_this","window","location","pathname","slice","events","forEach","evt","addEventListener","save","load","state","JSON","parse","localStorage","getItem","setFilterModel","filterModel","applyColumnState","columnState","applyOrder","e","setItem","stringify","getFilterModel","getColumnState","default"],"sources":["/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/vuntangle/src/components/UGrid/features/State.js"],"sourcesContent":["/**\n * State class\n * manages the grid columns and filters state\n */\nexport default class State {\n  /**\n   * State constructor\n   * @param {String} id - the grid id\n   * @param {GridApi} gridApi - the grid api\n   * @param {ColumnApi} columnApi - the column api\n   */\n  constructor(id, gridApi, columnApi) {\n    this.gridId = id\n    this.gridApi = gridApi\n    this.columnApi = columnApi\n    this.stateId = null // the state identifier from local storage\n    this.init()\n  }\n\n  /**\n   * initialize state by adding grid events for which state is saved\n   * compute stateId based on gridId & location pathname\n   */\n  init() {\n    // UI-406 remove `/` at the end of id generated by pathname\n    const stateId = this.gridId + '_' + window.location.pathname\n    this.stateId = stateId.slice(-1) === '/' ? stateId.slice(0, -1) : stateId\n\n    // register the grid events\n    const events = ['columnVisible', 'columnPinned', 'dragStopped', 'sortChanged', 'filterChanged']\n    events.forEach(evt => this.gridApi.addEventListener(evt, () => this.save()))\n  }\n\n  // try to load a previously stored state if exists\n  load() {\n    try {\n      const state = JSON.parse(window.localStorage.getItem(this.stateId))\n      this.gridApi.setFilterModel(state?.filterModel)\n      this.columnApi.applyColumnState({ state: state?.columnState, applyOrder: true })\n    } catch (e) {}\n  }\n\n  // saves the state into local storage\n  save() {\n    window.localStorage.setItem(\n      this.stateId,\n      JSON.stringify({\n        filterModel: this.gridApi.getFilterModel(),\n        columnState: this.columnApi.getColumnState(),\n      }),\n    )\n  }\n}\n"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AAHA,IAIqBA,KAAK;EACxB;AACF;AACA;AACA;AACA;AACA;EACE,SAAAA,MAAYC,EAAE,EAAEC,OAAO,EAAEC,SAAS,EAAE;IAAAC,eAAA,OAAAJ,KAAA;IAClC,IAAI,CAACK,MAAM,GAAGJ,EAAE;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACG,OAAO,GAAG,IAAI,EAAC;IACpB,IAAI,CAACC,IAAI,CAAC,CAAC;EACb;;EAEA;AACF;AACA;AACA;EAHE,OAAAC,YAAA,CAAAR,KAAA;IAAAS,GAAA;IAAAC,KAAA,EAIA,SAAAH,IAAIA,CAAA,EAAG;MAAA,IAAAI,KAAA;MACL;MACA,IAAML,OAAO,GAAG,IAAI,CAACD,MAAM,GAAG,GAAG,GAAGO,MAAM,CAACC,QAAQ,CAACC,QAAQ;MAC5D,IAAI,CAACR,OAAO,GAAGA,OAAO,CAACS,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,GAAGT,OAAO,CAACS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGT,OAAO;;MAEzE;MACA,IAAMU,MAAM,GAAG,CAAC,eAAe,EAAE,cAAc,EAAE,aAAa,EAAE,aAAa,EAAE,eAAe,CAAC;MAC/FA,MAAM,CAACC,OAAO,CAAC,UAAAC,GAAG;QAAA,OAAIP,KAAI,CAACT,OAAO,CAACiB,gBAAgB,CAACD,GAAG,EAAE;UAAA,OAAMP,KAAI,CAACS,IAAI,CAAC,CAAC;QAAA,EAAC;MAAA,EAAC;IAC9E;;IAEA;EAAA;IAAAX,GAAA;IAAAC,KAAA,EACA,SAAAW,IAAIA,CAAA,EAAG;MACL,IAAI;QACF,IAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CAACZ,MAAM,CAACa,YAAY,CAACC,OAAO,CAAC,IAAI,CAACpB,OAAO,CAAC,CAAC;QACnE,IAAI,CAACJ,OAAO,CAACyB,cAAc,CAACL,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEM,WAAW,CAAC;QAC/C,IAAI,CAACzB,SAAS,CAAC0B,gBAAgB,CAAC;UAAEP,KAAK,EAAEA,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEQ,WAAW;UAAEC,UAAU,EAAE;QAAK,CAAC,CAAC;MAClF,CAAC,CAAC,OAAOC,CAAC,EAAE,CAAC;IACf;;IAEA;EAAA;IAAAvB,GAAA;IAAAC,KAAA,EACA,SAAAU,IAAIA,CAAA,EAAG;MACLR,MAAM,CAACa,YAAY,CAACQ,OAAO,CACzB,IAAI,CAAC3B,OAAO,EACZiB,IAAI,CAACW,SAAS,CAAC;QACbN,WAAW,EAAE,IAAI,CAAC1B,OAAO,CAACiC,cAAc,CAAC,CAAC;QAC1CL,WAAW,EAAE,IAAI,CAAC3B,SAAS,CAACiC,cAAc,CAAC;MAC7C,CAAC,CACH,CAAC;IACH;EAAC;AAAA;AAAA,SA/CkBpC,KAAK,IAAAqC,OAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}