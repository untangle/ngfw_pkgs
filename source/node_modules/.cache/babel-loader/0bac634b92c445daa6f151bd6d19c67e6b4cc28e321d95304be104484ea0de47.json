{"ast":null,"code":"import \"core-js/modules/web.timers.js\";\nimport ServerSettings from '@/Setup_wizard/step/ServerSettings.vue';\nexport default {\n  components: {\n    ServerSettings: ServerSettings\n  },\n  props: {\n    setupRpc: {\n      type: Object,\n      required: true\n    },\n    adminRpc: {\n      type: Object,\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      remoteEulaSrc: '',\n      remoteImage: '',\n      timer: null,\n      showServerSettings: false\n    };\n  },\n  mounted: function mounted() {\n    this.afterRender();\n    console.log('setupRpc', this.setupRpc);\n    console.log('adminRpc', this.adminRpc);\n  },\n  methods: {\n    afterRender: function afterRender() {\n      var _this = this;\n      // Retrieve license URLs from the RPC configuration\n      this.remoteEulaSrc = this.setupRpc.licenseAgreementUrl;\n      this.remoteImage = this.setupRpc.licenseTestUrl;\n      var hyperlink = document.getElementById('licenseUrl');\n      hyperlink.href = this.remoteEulaSrc;\n      hyperlink.innerText = this.remoteEulaSrc;\n      var img = new Image(0, 0);\n      img.onload = this.clearTimer;\n      img.onerror = img.onabort = this.handleFail;\n      img.src = this.remoteImage;\n      this.timer = setTimeout(function () {\n        return _this.handleFail();\n      }, 1000);\n    },\n    clearTimer: function clearTimer() {\n      if (this.timer) {\n        clearTimeout(this.timer);\n        this.timer = null;\n      }\n    },\n    handleFail: function handleFail() {\n      console.error('Failed to load license resources.');\n      this.clearTimer();\n    },\n    onContinue: function onContinue() {\n      // this.$emit('next')\n      this.showServerSettings = true;\n    },\n    onDisagree: function onDisagree() {\n      window.location.reload();\n    }\n  }\n};","map":{"version":3,"names":["ServerSettings","components","props","setupRpc","type","Object","required","adminRpc","data","remoteEulaSrc","remoteImage","timer","showServerSettings","mounted","afterRender","console","log","methods","_this","licenseAgreementUrl","licenseTestUrl","hyperlink","document","getElementById","href","innerText","img","Image","onload","clearTimer","onerror","onabort","handleFail","src","setTimeout","clearTimeout","error","onContinue","onDisagree","window","location","reload"],"sources":["src/Setup_wizard/step/License.vue"],"sourcesContent":["<template>\n  <ServerSettings v-if=\"showServerSettings\" :setup-rpc=\"setupRpc\" :admin-rpc=\"adminRpc\" />\n  <div v-else class=\"license\">\n    <div class=\"content-container\">\n      <h2>License</h2>\n      <p class=\"description\">\n        To continue installing and using this software, you must agree to the terms and conditions of the software\n        license agreement. Please review the whole license agreement by navigating to the provided website link and\n        scrolling through to the end of the agreement.\n      </p>\n\n      <p class=\"license-link\">\n        The license is available at\n        <a id=\"licenseUrl\" :href=\"remoteEulaSrc\" target=\"_blank\">\n          {{ remoteEulaSrc }}\n        </a>\n      </p>\n\n      <p class=\"after-setup\">After completing the setup, legal links can also be viewed from the About page.</p>\n\n      <div class=\"button-container\">\n        <button class=\"disagree-button\" @click=\"onDisagree\">Disagree</button>\n        <button class=\"agree-button\" @click=\"onContinue\">Agree</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import ServerSettings from '@/Setup_wizard/step/ServerSettings.vue'\n\n  export default {\n    components: {\n      ServerSettings,\n    },\n    props: {\n      setupRpc: {\n        type: Object,\n        required: true,\n      },\n      adminRpc: {\n        type: Object,\n        required: true,\n      },\n    },\n    data() {\n      return {\n        remoteEulaSrc: '',\n        remoteImage: '',\n        timer: null,\n        showServerSettings: false,\n      }\n    },\n    mounted() {\n      this.afterRender()\n      console.log('setupRpc', this.setupRpc)\n      console.log('adminRpc', this.adminRpc)\n    },\n    methods: {\n      afterRender() {\n        // Retrieve license URLs from the RPC configuration\n        this.remoteEulaSrc = this.setupRpc.licenseAgreementUrl\n        this.remoteImage = this.setupRpc.licenseTestUrl\n\n        const hyperlink = document.getElementById('licenseUrl')\n        hyperlink.href = this.remoteEulaSrc\n        hyperlink.innerText = this.remoteEulaSrc\n\n        const img = new Image(0, 0)\n        img.onload = this.clearTimer\n        img.onerror = img.onabort = this.handleFail\n\n        img.src = this.remoteImage\n        this.timer = setTimeout(() => this.handleFail(), 1000)\n      },\n      clearTimer() {\n        if (this.timer) {\n          clearTimeout(this.timer)\n          this.timer = null\n        }\n      },\n      handleFail() {\n        console.error('Failed to load license resources.')\n        this.clearTimer()\n      },\n      onContinue() {\n        // this.$emit('next')\n        this.showServerSettings = true\n      },\n      onDisagree() {\n        window.location.reload()\n      },\n    },\n  }\n</script>\n\n<style scoped>\n  .license {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 20px;\n    text-align: center;\n    font-family: Arial, sans-serif;\n    border: 2px solid #ccc; /* Add border */\n    border-radius: 8px; /* Optional: rounded corners */\n    margin: 20px; /* Optional: spacing around the div */\n  }\n\n  .content-container {\n    max-width: 600px;\n  }\n\n  .description {\n    margin-bottom: 10px;\n    word-wrap: break-word;\n  }\n\n  .license-link {\n    margin-top: 10px;\n    word-wrap: break-word;\n  }\n\n  .after-setup {\n    margin-top: 10px;\n    font-weight: bold;\n  }\n\n  .button-container {\n    display: flex;\n    justify-content: center;\n    margin-top: 15px;\n  }\n\n  .disagree-button,\n  .agree-button {\n    margin: 0 10px;\n    padding: 10px 20px;\n    border: none;\n    cursor: pointer;\n    font-size: 16px;\n  }\n\n  .disagree-button {\n    background-color: #f44336;\n    color: white;\n  }\n\n  .agree-button {\n    background-color: #4caf50;\n    color: white;\n  }\n</style>\n"],"mappings":";AA6BA,OAAAA,cAAA;AAEA;EACAC,UAAA;IACAD,cAAA,EAAAA;EACA;EACAE,KAAA;IACAC,QAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,QAAA;MACAH,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EACAE,IAAA,WAAAA,KAAA;IACA;MACAC,aAAA;MACAC,WAAA;MACAC,KAAA;MACAC,kBAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,WAAA;IACAC,OAAA,CAAAC,GAAA,kBAAAb,QAAA;IACAY,OAAA,CAAAC,GAAA,kBAAAT,QAAA;EACA;EACAU,OAAA;IACAH,WAAA,WAAAA,YAAA;MAAA,IAAAI,KAAA;MACA;MACA,KAAAT,aAAA,QAAAN,QAAA,CAAAgB,mBAAA;MACA,KAAAT,WAAA,QAAAP,QAAA,CAAAiB,cAAA;MAEA,IAAAC,SAAA,GAAAC,QAAA,CAAAC,cAAA;MACAF,SAAA,CAAAG,IAAA,QAAAf,aAAA;MACAY,SAAA,CAAAI,SAAA,QAAAhB,aAAA;MAEA,IAAAiB,GAAA,OAAAC,KAAA;MACAD,GAAA,CAAAE,MAAA,QAAAC,UAAA;MACAH,GAAA,CAAAI,OAAA,GAAAJ,GAAA,CAAAK,OAAA,QAAAC,UAAA;MAEAN,GAAA,CAAAO,GAAA,QAAAvB,WAAA;MACA,KAAAC,KAAA,GAAAuB,UAAA;QAAA,OAAAhB,KAAA,CAAAc,UAAA;MAAA;IACA;IACAH,UAAA,WAAAA,WAAA;MACA,SAAAlB,KAAA;QACAwB,YAAA,MAAAxB,KAAA;QACA,KAAAA,KAAA;MACA;IACA;IACAqB,UAAA,WAAAA,WAAA;MACAjB,OAAA,CAAAqB,KAAA;MACA,KAAAP,UAAA;IACA;IACAQ,UAAA,WAAAA,WAAA;MACA;MACA,KAAAzB,kBAAA;IACA;IACA0B,UAAA,WAAAA,WAAA;MACAC,MAAA,CAAAC,QAAA,CAAAC,MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}