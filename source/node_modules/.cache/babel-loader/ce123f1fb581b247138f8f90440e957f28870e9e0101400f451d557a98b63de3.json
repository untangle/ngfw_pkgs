{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n// utils/util.js\nimport axios from 'axios';\nvar Util = {\n  v4NetmaskList: [[32, '/32 - 255.255.255.255'], [31, '/31 - 255.255.255.254'], [30, '/30 - 255.255.255.252'], [29, '/29 - 255.255.255.248'], [28, '/28 - 255.255.255.240'], [27, '/27 - 255.255.255.224'], [26, '/26 - 255.255.255.192'], [25, '/25 - 255.255.255.128'], [24, '/24 - 255.255.255.0'], [23, '/23 - 255.255.254.0'], [22, '/22 - 255.255.252.0'], [21, '/21 - 255.255.248.0'], [20, '/20 - 255.255.240.0'], [19, '/19 - 255.255.224.0'], [18, '/18 - 255.255.192.0'], [17, '/17 - 255.255.128.0'], [16, '/16 - 255.255.0.0'], [15, '/15 - 255.254.0.0'], [14, '/14 - 255.252.0.0'], [13, '/13 - 255.248.0.0'], [12, '/12 - 255.240.0.0'], [11, '/11 - 255.224.0.0'], [10, '/10 - 255.192.0.0'], [9, '/9 - 255.128.0.0'], [8, '/8 - 255.0.0.0'], [7, '/7 - 254.0.0.0'], [6, '/6 - 252.0.0.0'], [5, '/5 - 248.0.0.0'], [4, '/4 - 240.0.0.0'], [3, '/3 - 224.0.0.0'], [2, '/2 - 192.0.0.0'], [1, '/1 - 128.0.0.0'], [0, '/0 - 0.0.0.0']],\n  setRpcJsonrpc: function setRpcJsonrpc(root) {\n    var setupInfo;\n    var success = true;\n    try {\n      var rpc = {\n        jsonrpc: new window.JSONRpcClient(\"/\".concat(root, \"/JSON-RPC\"))\n      };\n      setupInfo = rpc.jsonrpc.UvmContext ? rpc.jsonrpc.UvmContext.getSetupStartupInfo() : rpc.jsonrpc.SetupContext.getSetupWizardStartupInfo();\n      Object.assign(rpc, setupInfo);\n    } catch (e) {\n      success = false;\n      console.error(e); // Handle the exception here\n    }\n    return success;\n  },\n  authenticate: function authenticate(password, cb) {\n    var _this = this;\n    var url = '/auth/login?url=/admin&realm=Administrator';\n    console.log('Authenticating with password:', password);\n    axios.post(url, new URLSearchParams({\n      username: 'admin',\n      password: password\n    }), {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    }).then(function (response) {\n      // console.log('Authentication response:', response.data)\n\n      // Check if loginPage exists in the response\n      if (response.data && response.data.includes('loginPage')) {\n        if (password === 'passwd') {\n          cb(null, true); // Default success callback for 'passwd'\n        } else {\n          console.error('Invalid password provided.');\n          cb(new Error('Invalid password.'), false);\n        }\n        return;\n      }\n\n      // Set up RPC JSON-RPC client\n      _this.setRpcJsonrpc('admin');\n      var adminRpc = new window.JSONRpcClient('/admin/JSON-RPC');\n      var rpc = {\n        tolerateKeepAliveExceptions: false,\n        keepAlive: function keepAlive() {\n          if (adminRpc.UvmContext) {\n            adminRpc.UvmContext.getFullVersion(function (result, exception) {\n              if (!rpc.tolerateKeepAliveExceptions && exception) {\n                Util.handleException(exception);\n                return;\n              }\n              setTimeout(function () {\n                return rpc.keepAlive();\n              }, 300000);\n            });\n          } else {\n            console.error('UvmContext is not available in RPC.');\n          }\n        }\n      };\n      rpc.keepAlive();\n      cb(null, true); // Successfully authenticated\n    })[\"catch\"](function (error) {\n      console.error('Error during authentication:', error);\n      cb(new Error('Authentication request failed.'), false);\n    });\n  },\n  handleException: function handleException(exception) {\n    if (!exception) {\n      console.error('Null Exception!');\n      return;\n    }\n    var details = '';\n    if (exception.message) {\n      details += \"<b>Exception message:</b> \".concat(exception.message.replace(/\\n/g, '<br/>'), \"<br/><br/>\");\n    }\n    if (exception.stack) {\n      details += \"<b>Exception stack:</b> \".concat(exception.stack.replace(/\\n/g, '<br/>'), \"<br/><br/>\");\n    }\n    if (exception.response && exception.response.includes('loginPage')) {\n      this.showWarningMessage('Session timed out.<br/>Press OK to return to the login page.', details, this.goToStartPage);\n      return;\n    }\n    this.showWarningMessage('An error occurred', details, this.goToStartPage);\n  },\n  showWarningMessage: function showWarningMessage(message, details, errorHandler) {\n    // Use your modal library here. Example:\n    this.$notify({\n      title: 'Warning',\n      message: \"\\n        <div>\\n          <p>\".concat(message, \"</p>\\n          \").concat(details ? \"<details><summary>Details</summary><p>\".concat(details, \"</p></details>\") : '', \"\\n        </div>\\n      \"),\n      type: 'warning',\n      dangerouslyUseHTMLString: true\n    });\n    if (errorHandler) {\n      errorHandler();\n    }\n  },\n  goToStartPage: function goToStartPage() {\n    alert('Redirecting to the start page...');\n    location.reload();\n  }\n};\nexport default Util;","map":{"version":3,"names":["axios","Util","v4NetmaskList","setRpcJsonrpc","root","setupInfo","success","rpc","jsonrpc","window","JSONRpcClient","concat","UvmContext","getSetupStartupInfo","SetupContext","getSetupWizardStartupInfo","Object","assign","e","console","error","authenticate","password","cb","_this","url","log","post","URLSearchParams","username","headers","then","response","data","includes","Error","adminRpc","tolerateKeepAliveExceptions","keepAlive","getFullVersion","result","exception","handleException","setTimeout","details","message","replace","stack","showWarningMessage","goToStartPage","errorHandler","$notify","title","type","dangerouslyUseHTMLString","alert","location","reload"],"sources":["/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/src/util/setupUtils.js"],"sourcesContent":["// utils/util.js\nimport axios from 'axios'\n\nconst Util = {\n  v4NetmaskList: [\n    [32, '/32 - 255.255.255.255'],\n    [31, '/31 - 255.255.255.254'],\n    [30, '/30 - 255.255.255.252'],\n    [29, '/29 - 255.255.255.248'],\n    [28, '/28 - 255.255.255.240'],\n    [27, '/27 - 255.255.255.224'],\n    [26, '/26 - 255.255.255.192'],\n    [25, '/25 - 255.255.255.128'],\n    [24, '/24 - 255.255.255.0'],\n    [23, '/23 - 255.255.254.0'],\n    [22, '/22 - 255.255.252.0'],\n    [21, '/21 - 255.255.248.0'],\n    [20, '/20 - 255.255.240.0'],\n    [19, '/19 - 255.255.224.0'],\n    [18, '/18 - 255.255.192.0'],\n    [17, '/17 - 255.255.128.0'],\n    [16, '/16 - 255.255.0.0'],\n    [15, '/15 - 255.254.0.0'],\n    [14, '/14 - 255.252.0.0'],\n    [13, '/13 - 255.248.0.0'],\n    [12, '/12 - 255.240.0.0'],\n    [11, '/11 - 255.224.0.0'],\n    [10, '/10 - 255.192.0.0'],\n    [9, '/9 - 255.128.0.0'],\n    [8, '/8 - 255.0.0.0'],\n    [7, '/7 - 254.0.0.0'],\n    [6, '/6 - 252.0.0.0'],\n    [5, '/5 - 248.0.0.0'],\n    [4, '/4 - 240.0.0.0'],\n    [3, '/3 - 224.0.0.0'],\n    [2, '/2 - 192.0.0.0'],\n    [1, '/1 - 128.0.0.0'],\n    [0, '/0 - 0.0.0.0'],\n  ],\n\n  setRpcJsonrpc(root) {\n    let setupInfo\n    let success = true\n\n    try {\n      const rpc = {\n        jsonrpc: new window.JSONRpcClient(`/${root}/JSON-RPC`),\n      }\n\n      setupInfo = rpc.jsonrpc.UvmContext\n        ? rpc.jsonrpc.UvmContext.getSetupStartupInfo()\n        : rpc.jsonrpc.SetupContext.getSetupWizardStartupInfo()\n\n      Object.assign(rpc, setupInfo)\n    } catch (e) {\n      success = false\n      console.error(e) // Handle the exception here\n    }\n\n    return success\n  },\n\n  authenticate(password, cb) {\n    const url = '/auth/login?url=/admin&realm=Administrator'\n    console.log('Authenticating with password:', password)\n\n    axios\n      .post(\n        url,\n        new URLSearchParams({\n          username: 'admin',\n          password,\n        }),\n        {\n          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n        },\n      )\n      .then(response => {\n        // console.log('Authentication response:', response.data)\n\n        // Check if loginPage exists in the response\n        if (response.data && response.data.includes('loginPage')) {\n          if (password === 'passwd') {\n            cb(null, true) // Default success callback for 'passwd'\n          } else {\n            console.error('Invalid password provided.')\n            cb(new Error('Invalid password.'), false)\n          }\n          return\n        }\n\n        // Set up RPC JSON-RPC client\n        this.setRpcJsonrpc('admin')\n\n        const adminRpc = new window.JSONRpcClient('/admin/JSON-RPC')\n        const rpc = {\n          tolerateKeepAliveExceptions: false,\n          keepAlive() {\n            if (adminRpc.UvmContext) {\n              adminRpc.UvmContext.getFullVersion((result, exception) => {\n                if (!rpc.tolerateKeepAliveExceptions && exception) {\n                  Util.handleException(exception)\n                  return\n                }\n                setTimeout(() => rpc.keepAlive(), 300000)\n              })\n            } else {\n              console.error('UvmContext is not available in RPC.')\n            }\n          },\n        }\n\n        rpc.keepAlive()\n        cb(null, true) // Successfully authenticated\n      })\n      .catch(error => {\n        console.error('Error during authentication:', error)\n        cb(new Error('Authentication request failed.'), false)\n      })\n  },\n\n  handleException(exception) {\n    if (!exception) {\n      console.error('Null Exception!')\n      return\n    }\n\n    let details = ''\n    if (exception.message) {\n      details += `<b>Exception message:</b> ${exception.message.replace(/\\n/g, '<br/>')}<br/><br/>`\n    }\n    if (exception.stack) {\n      details += `<b>Exception stack:</b> ${exception.stack.replace(/\\n/g, '<br/>')}<br/><br/>`\n    }\n\n    if (exception.response && exception.response.includes('loginPage')) {\n      this.showWarningMessage(\n        'Session timed out.<br/>Press OK to return to the login page.',\n        details,\n        this.goToStartPage,\n      )\n      return\n    }\n\n    this.showWarningMessage('An error occurred', details, this.goToStartPage)\n  },\n\n  showWarningMessage(message, details, errorHandler) {\n    // Use your modal library here. Example:\n    this.$notify({\n      title: 'Warning',\n      message: `\n        <div>\n          <p>${message}</p>\n          ${details ? `<details><summary>Details</summary><p>${details}</p></details>` : ''}\n        </div>\n      `,\n      type: 'warning',\n      dangerouslyUseHTMLString: true,\n    })\n\n    if (errorHandler) {\n      errorHandler()\n    }\n  },\n\n  goToStartPage() {\n    alert('Redirecting to the start page...')\n    location.reload()\n  },\n}\n\nexport default Util\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}