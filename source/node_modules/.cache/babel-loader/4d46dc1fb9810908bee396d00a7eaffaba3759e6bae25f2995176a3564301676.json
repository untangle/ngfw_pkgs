{"ast":null,"code":"import _regeneratorRuntime from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { VCard, VCardTitle, VSpacer, VDivider, VRow, VCol, VCheckbox } from 'vuetify/lib';\nimport { ValidationObserver, ValidationProvider } from 'vee-validate';\nimport cloneDeep from 'lodash/cloneDeep';\nimport CustomRuleConditions from './CustomRuleConditions.vue';\nexport default {\n  components: {\n    VCard: VCard,\n    VCardTitle: VCardTitle,\n    VSpacer: VSpacer,\n    VDivider: VDivider,\n    VRow: VRow,\n    VCol: VCol,\n    VCheckbox: VCheckbox,\n    ValidationObserver: ValidationObserver,\n    ValidationProvider: ValidationProvider,\n    CustomRuleConditions: CustomRuleConditions\n  },\n  props: {\n    rule: {\n      type: Object,\n      \"default\": function _default() {\n        return null;\n      }\n    },\n    categories: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    },\n    ruleNames: {\n      type: Array,\n      \"default\": function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      ruleCopy: null,\n      levels: [{\n        text: 'lowest',\n        value: 1\n      }, {\n        text: 'low',\n        value: 2\n      }, {\n        text: 'medium',\n        value: 3\n      }, {\n        text: 'high',\n        value: 4\n      }, {\n        text: 'highest',\n        value: 5\n      }]\n    };\n  },\n  watch: {\n    rule: {\n      handler: function handler(rule) {\n        this.ruleCopy = cloneDeep(rule);\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    onChange: function onChange(checked, rule, value) {\n      if (checked === 'reject' || checked === 'block') {\n        // Show Flag whenever reject/block is checked\n        rule.flag = 'flag';\n        rule.disabled = true;\n      } else if (checked === null && (value === 'REJECT' || value === 'BLOCK')) {\n        // Remove Flag whenever reject/block is unchecked\n        rule.flag = '';\n        rule.disabled = false;\n      } else if (checked === 'flag') {\n        rule.action = 'flag';\n      } else {\n        rule.flag = '';\n        rule.disabled = false;\n      }\n    },\n    validate: function validate() {\n      var _this = this;\n      return _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var isValid;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _this.$refs.obs.validate();\n            case 2:\n              isValid = _context.sent;\n              return _context.abrupt(\"return\", isValid);\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"names":["VCard","VCardTitle","VSpacer","VDivider","VRow","VCol","VCheckbox","ValidationObserver","ValidationProvider","cloneDeep","CustomRuleConditions","components","props","rule","type","Object","default","categories","Array","ruleNames","data","ruleCopy","levels","text","value","watch","handler","immediate","methods","onChange","checked","flag","disabled","action","validate","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","isValid","wrap","_callee$","_context","prev","next","$refs","obs","sent","abrupt","stop"],"sources":["node_modules/vuntangle/src/shared/SettingsApplicationControl/components/CustomRule.vue"],"sourcesContent":["<template>\n  <v-card outlined style=\"flex-grow: 1\">\n    <v-card-title class=\"py-3 px-4\">\n      <span>{{ $t(`${!rule.name ? 'ac_add_custom_rule' : 'ac_edit_custom_rule'}`) }}</span>\n      <v-spacer />\n      <slot name=\"actions\" :updated-rule=\"ruleCopy\"></slot>\n    </v-card-title>\n    <v-divider />\n    <div class=\"pa-4\">\n      <ValidationObserver ref=\"obs\">\n        <v-row dense>\n          <v-col cols=\"6\">\n            <ValidationProvider\n              v-slot=\"{ errors }\"\n              :rules=\"{\n                required: true,\n                unique_insensitive: { list: ruleNames, message: $t('ac_rule_name_already_used') },\n              }\"\n            >\n              <u-text-field v-model=\"ruleCopy.name\" :label=\"$t('name')\" :error-messages=\"errors\">\n                <template v-if=\"errors.length\" #append>\n                  <u-errors-tooltip :errors=\"errors\" />\n                </template>\n              </u-text-field>\n            </ValidationProvider>\n          </v-col>\n\n          <v-col cols=\"6\">\n            <ValidationProvider v-slot=\"{ errors }\" rules=\"required\">\n              <u-select v-model=\"ruleCopy.category\" :items=\"categories\" :label=\"$t('category')\">\n                <template #selection=\"{ item }\">{{ $t(item.replace(/ /g, '_').toLowerCase()) }}</template>\n                <template #item=\"{ item }\">{{ $t(item.replace(/ /g, '_').toLowerCase()) }}</template>\n                <template v-if=\"errors.length\" #append><u-errors-tooltip :errors=\"errors\" /></template>\n              </u-select>\n            </ValidationProvider>\n          </v-col>\n        </v-row>\n        <v-row dense>\n          <v-col cols=\"12\">\n            <u-text-field v-model=\"ruleCopy.description\" :label=\"$t('description')\" />\n          </v-col>\n        </v-row>\n\n        <h3 class=\"mt-8 mb-2\">{{ $t('conditions') }}</h3>\n\n        <custom-rule-conditions :conditions=\"ruleCopy.conditions\" />\n\n        <h3 class=\"mt-8\">{{ $t('action') }}</h3>\n        <div class=\"d-flex\">\n          <v-checkbox\n            v-model=\"ruleCopy.action\"\n            value=\"reject\"\n            :ripple=\"false\"\n            :label=\"$t('reject')\"\n            hide-details\n            class=\"my-0 mr-4\"\n            @change=\"onChange($event, ruleCopy, 'REJECT')\"\n          />\n          <v-checkbox\n            v-model=\"ruleCopy.action\"\n            value=\"block\"\n            :ripple=\"false\"\n            :label=\"$t('block')\"\n            hide-details\n            class=\"my-0 mr-4\"\n            @change=\"onChange($event, ruleCopy, 'BLOCK')\"\n          />\n          <v-checkbox\n            v-model=\"ruleCopy.flag\"\n            value=\"flag\"\n            :ripple=\"false\"\n            :label=\"$t('flag')\"\n            hide-details\n            class=\"my-0 mr-4\"\n            :disabled=\"ruleCopy.disabled\"\n            @change=\"onChange($event, ruleCopy, 'FLAG')\"\n          />\n          <v-checkbox\n            v-model=\"ruleCopy.action\"\n            value=\"bypass\"\n            :ripple=\"false\"\n            :label=\"$t('bypass')\"\n            hide-details\n            class=\"my-0 mr-4\"\n            @change=\"onChange($event, ruleCopy, 'BYPASS')\"\n          />\n        </div>\n      </ValidationObserver>\n    </div>\n  </v-card>\n</template>\n<script>\n  import { VCard, VCardTitle, VSpacer, VDivider, VRow, VCol, VCheckbox } from 'vuetify/lib'\n  import { ValidationObserver, ValidationProvider } from 'vee-validate'\n  import cloneDeep from 'lodash/cloneDeep'\n  import CustomRuleConditions from './CustomRuleConditions.vue'\n\n  export default {\n    components: {\n      VCard,\n      VCardTitle,\n      VSpacer,\n      VDivider,\n      VRow,\n      VCol,\n      VCheckbox,\n      ValidationObserver,\n      ValidationProvider,\n\n      CustomRuleConditions,\n    },\n    props: {\n      rule: { type: Object, default: () => null },\n      categories: { type: Array, default: () => [] },\n      ruleNames: { type: Array, default: () => [] },\n    },\n    data: () => ({\n      ruleCopy: null,\n      levels: [\n        { text: 'lowest', value: 1 },\n        { text: 'low', value: 2 },\n        { text: 'medium', value: 3 },\n        { text: 'high', value: 4 },\n        { text: 'highest', value: 5 },\n      ],\n    }),\n    watch: {\n      rule: {\n        handler(rule) {\n          this.ruleCopy = cloneDeep(rule)\n        },\n        immediate: true,\n      },\n    },\n\n    methods: {\n      onChange(checked, rule, value) {\n        if (checked === 'reject' || checked === 'block') {\n          // Show Flag whenever reject/block is checked\n          rule.flag = 'flag'\n          rule.disabled = true\n        } else if (checked === null && (value === 'REJECT' || value === 'BLOCK')) {\n          // Remove Flag whenever reject/block is unchecked\n          rule.flag = ''\n          rule.disabled = false\n        } else if (checked === 'flag') {\n          rule.action = 'flag'\n        } else {\n          rule.flag = ''\n          rule.disabled = false\n        }\n      },\n      async validate() {\n        const isValid = await this.$refs.obs.validate()\n        return isValid\n      },\n    },\n  }\n</script>\n"],"mappings":";;AA4FA,SAAAA,KAAA,EAAAC,UAAA,EAAAC,OAAA,EAAAC,QAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,SAAA;AACA,SAAAC,kBAAA,EAAAC,kBAAA;AACA,OAAAC,SAAA;AACA,OAAAC,oBAAA;AAEA;EACAC,UAAA;IACAX,KAAA,EAAAA,KAAA;IACAC,UAAA,EAAAA,UAAA;IACAC,OAAA,EAAAA,OAAA;IACAC,QAAA,EAAAA,QAAA;IACAC,IAAA,EAAAA,IAAA;IACAC,IAAA,EAAAA,IAAA;IACAC,SAAA,EAAAA,SAAA;IACAC,kBAAA,EAAAA,kBAAA;IACAC,kBAAA,EAAAA,kBAAA;IAEAE,oBAAA,EAAAA;EACA;EACAE,KAAA;IACAC,IAAA;MAAAC,IAAA,EAAAC,MAAA;MAAA,oBAAAC,SAAA;QAAA;MAAA;IAAA;IACAC,UAAA;MAAAH,IAAA,EAAAI,KAAA;MAAA,oBAAAF,SAAA;QAAA;MAAA;IAAA;IACAG,SAAA;MAAAL,IAAA,EAAAI,KAAA;MAAA,oBAAAF,SAAA;QAAA;MAAA;IAAA;EACA;EACAI,IAAA,WAAAA,KAAA;IAAA;MACAC,QAAA;MACAC,MAAA,GACA;QAAAC,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,IAAA;QAAAC,KAAA;MAAA;IAEA;EAAA;EACAC,KAAA;IACAZ,IAAA;MACAa,OAAA,WAAAA,QAAAb,IAAA;QACA,KAAAQ,QAAA,GAAAZ,SAAA,CAAAI,IAAA;MACA;MACAc,SAAA;IACA;EACA;EAEAC,OAAA;IACAC,QAAA,WAAAA,SAAAC,OAAA,EAAAjB,IAAA,EAAAW,KAAA;MACA,IAAAM,OAAA,iBAAAA,OAAA;QACA;QACAjB,IAAA,CAAAkB,IAAA;QACAlB,IAAA,CAAAmB,QAAA;MACA,WAAAF,OAAA,cAAAN,KAAA,iBAAAA,KAAA;QACA;QACAX,IAAA,CAAAkB,IAAA;QACAlB,IAAA,CAAAmB,QAAA;MACA,WAAAF,OAAA;QACAjB,IAAA,CAAAoB,MAAA;MACA;QACApB,IAAA,CAAAkB,IAAA;QACAlB,IAAA,CAAAmB,QAAA;MACA;IACA;IACAE,QAAA,WAAAA,SAAA;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,OAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAE,IAAA;cAAA,OACAV,KAAA,CAAAW,KAAA,CAAAC,GAAA,CAAAb,QAAA;YAAA;cAAAM,OAAA,GAAAG,QAAA,CAAAK,IAAA;cAAA,OAAAL,QAAA,CAAAM,MAAA,WACAT,OAAA;YAAA;YAAA;cAAA,OAAAG,QAAA,CAAAO,IAAA;UAAA;QAAA,GAAAX,OAAA;MAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}