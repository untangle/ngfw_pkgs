{"ast":null,"code":"import _defineProperty from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/home/shubham/Desktop/ngfw_pkgs/untangle-vue-ui/source/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.object.entries.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.set.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { VContainer, VDivider, VSwitch, VCard, VBtn, VBtnToggle, VTabItem, VTabsItems, VSpacer } from 'vuetify/lib';\nimport settingsMixin from '../settingsMixin';\nimport { UListGroup } from '../../components';\nimport defaults from './defaults';\nimport schema from './schema';\nimport TabCustomRules from './components/TabCustomRules.vue';\nexport default {\n  components: {\n    VContainer: VContainer,\n    VDivider: VDivider,\n    VSwitch: VSwitch,\n    VCard: VCard,\n    VBtn: VBtn,\n    VBtnToggle: VBtnToggle,\n    VTabItem: VTabItem,\n    VTabsItems: VTabsItems,\n    VSpacer: VSpacer,\n    UListGroup: UListGroup,\n    TabCustomRules: TabCustomRules\n  },\n  // add the generic settings mixin\n  mixins: [settingsMixin],\n  // attach `defaults` and `schema` to the component $options as no reactive data\n  defaults: defaults,\n  schema: schema,\n  props: {\n    applications: {\n      type: Array,\n      required: true\n    },\n    showCustomRuleTab: {\n      type: Boolean,\n      \"default\": true\n    }\n  },\n  data: function data() {\n    return {\n      selectedTab: 'ac_applications'\n    };\n  },\n  computed: {\n    tabs: function tabs() {\n      return this.showCustomRuleTab ? ['ac_applications', 'ac_custom_rules'] : ['ac_applications'];\n    },\n    applicationCategories: function applicationCategories() {\n      return _toConsumableArray(new Set(this.applications.map(function (app) {\n        return app.category;\n      }))).sort();\n    },\n    applicationsList: function applicationsList() {\n      return this.applications.map(function (app) {\n        return app.guid;\n      }).sort();\n    },\n    applicationActions: function applicationActions() {\n      return [{\n        value: 'reject',\n        text: 'reject',\n        forceEnabledFor: [],\n        resets: 'block'\n      }, {\n        value: 'block',\n        text: 'block',\n        forceEnabledFor: [],\n        resets: 'reject'\n      }, {\n        value: 'flag',\n        text: 'flag',\n        forceEnabledFor: ['block', 'reject']\n      }];\n    },\n    selectedApps: {\n      get: function get(_ref) {\n        var settingsCopy = _ref.settingsCopy;\n        return Object.entries(settingsCopy.actions).reduce(function (result, _ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n            flag = _ref3[0],\n            list = _ref3[1];\n          list.forEach(function (guid) {\n            var item = result.find(function (_ref4) {\n              var id = _ref4.guid;\n              return id === guid;\n            });\n            if (item) {\n              item[flag] = true;\n            } else {\n              result.push(_defineProperty(_defineProperty({}, flag, true), \"guid\", guid));\n            }\n          });\n          return result;\n        }, []);\n      },\n      set: function set(apps) {\n        var _this = this;\n        var actions = apps.reduce(function (result, app) {\n          _this.applicationActions.forEach(function (_ref5) {\n            var flag = _ref5.value;\n            if (app[flag]) {\n              result[flag].push(app.guid);\n            }\n          });\n          return result;\n        }, {\n          reject: [],\n          block: [],\n          flag: []\n        });\n        this.$set(this.settingsCopy, 'actions', actions);\n      }\n    }\n  },\n  watch: {\n    selectedTab: function selectedTab() {\n      // when switching from custom apps reset it's view\n      if (this.$refs.customRules) this.$refs.customRules.reset();\n    }\n  }\n};","map":{"version":3,"names":["VContainer","VDivider","VSwitch","VCard","VBtn","VBtnToggle","VTabItem","VTabsItems","VSpacer","settingsMixin","UListGroup","defaults","schema","TabCustomRules","components","mixins","props","applications","type","Array","required","showCustomRuleTab","Boolean","data","selectedTab","computed","tabs","applicationCategories","_toConsumableArray","Set","map","app","category","sort","applicationsList","guid","applicationActions","value","text","forceEnabledFor","resets","selectedApps","get","_ref","settingsCopy","Object","entries","actions","reduce","result","_ref2","_ref3","_slicedToArray","flag","list","forEach","item","find","_ref4","id","push","_defineProperty","set","apps","_this","_ref5","reject","block","$set","watch","$refs","customRules","reset"],"sources":["node_modules/vuntangle/src/shared/SettingsApplicationControl/Main.vue"],"sourcesContent":["<template>\n  <v-container\n    :fluid=\"classicView ? true : false\"\n    :class=\"`${classicView ? 'pa-4 ' : ''}shared-cmp d-flex flex-column fill-height align-stretch ${\n      disabled ? 'disabled' : ''\n    }`\"\n  >\n    <div class=\"d-flex flex-column fill-height\">\n      <div class=\"d-flex align-center\">\n        <h1 v-if=\"classicView\" class=\"headline\">{{ $t('application_control') }}</h1>\n        <h2 v-else class=\"font-weight-light\">{{ $t('application_control') }}</h2>\n        <v-spacer />\n        <slot name=\"actions\" :new-settings=\"settingsCopy\" :is-dirty=\"isDirty\" :defaults=\"$options.defaults\" />\n      </div>\n\n      <v-divider class=\"my-2\" />\n      <u-section v-if=\"!!$slots['extra-fields']\">\n        <slot name=\"extra-fields\" />\n      </u-section>\n      <component :is=\"!$slots['extra-fields'] ? 'div' : 'u-section'\" class=\"d-flex flex-column fill-height\">\n        <div class=\"d-flex\">\n          <v-switch v-model=\"settingsCopy.enabled\" dense inset hide-details :label=\"$t('enabled')\" class=\"mr-8\" />\n          <v-switch\n            v-model=\"settingsCopy.cloud_classification\"\n            dense\n            inset\n            hide-details\n            :label=\"$t('ac_cloud_classification')\"\n          />\n        </div>\n        <v-card :disabled=\"disabled\" flat color=\"transparent\" class=\"d-flex flex-column fill-height\">\n          <div class=\"d-flex flex-row align-center my-4\">\n            <v-divider />\n            <v-btn-toggle v-model=\"selectedTab\" dense rounded mandatory>\n              <v-btn\n                v-for=\"tab in tabs\"\n                :key=\"tab\"\n                :value=\"tab\"\n                :class=\"`${tab === selectedTab ? 'white--text' : ''} font-weight-bold px-8`\"\n                active-class=\"primary\"\n                min-width=\"150\"\n              >\n                {{ $t(tab) }}\n              </v-btn>\n            </v-btn-toggle>\n            <v-divider />\n          </div>\n          <v-tabs-items v-model=\"selectedTab\" class=\"ac-tab-items transparent\">\n            <v-tab-item\n              class=\"ac-tab-applications\"\n              value=\"ac_applications\"\n              :transition=\"false\"\n              :reverse-transition=\"false\"\n            >\n              <u-list-group\n                :items=\"applications\"\n                id-key=\"guid\"\n                :actions=\"applicationActions\"\n                :selected-items.sync=\"selectedApps\"\n              ></u-list-group>\n            </v-tab-item>\n            <v-tab-item\n              class=\"ac-tab-custom-rules\"\n              value=\"ac_custom_rules\"\n              :transition=\"false\"\n              :reverse-transition=\"false\"\n            >\n              <tab-custom-rules ref=\"customRules\" :apps=\"applications\" :custom-rules=\"settingsCopy.custom_rules\" />\n            </v-tab-item>\n          </v-tabs-items>\n        </v-card>\n      </component>\n    </div>\n  </v-container>\n</template>\n<script>\n  import { VContainer, VDivider, VSwitch, VCard, VBtn, VBtnToggle, VTabItem, VTabsItems, VSpacer } from 'vuetify/lib'\n  import settingsMixin from '../settingsMixin'\n  import { UListGroup } from '../../components'\n  import defaults from './defaults'\n  import schema from './schema'\n  import TabCustomRules from './components/TabCustomRules.vue'\n\n  export default {\n    components: {\n      VContainer,\n      VDivider,\n      VSwitch,\n      VCard,\n      VBtn,\n      VBtnToggle,\n      VTabItem,\n      VTabsItems,\n      VSpacer,\n\n      UListGroup,\n      TabCustomRules,\n    },\n\n    // add the generic settings mixin\n    mixins: [settingsMixin],\n\n    // attach `defaults` and `schema` to the component $options as no reactive data\n    defaults,\n    schema,\n\n    props: {\n      applications: {\n        type: Array,\n        required: true,\n      },\n      showCustomRuleTab: {\n        type: Boolean,\n        default: true,\n      },\n    },\n\n    data() {\n      return {\n        selectedTab: 'ac_applications',\n      }\n    },\n\n    computed: {\n      tabs() {\n        return this.showCustomRuleTab ? ['ac_applications', 'ac_custom_rules'] : ['ac_applications']\n      },\n      applicationCategories() {\n        return [...new Set(this.applications.map(app => app.category))].sort()\n      },\n      applicationsList() {\n        return this.applications.map(app => app.guid).sort()\n      },\n      applicationActions() {\n        return [\n          { value: 'reject', text: 'reject', forceEnabledFor: [], resets: 'block' },\n          { value: 'block', text: 'block', forceEnabledFor: [], resets: 'reject' },\n          { value: 'flag', text: 'flag', forceEnabledFor: ['block', 'reject'] },\n        ]\n      },\n      selectedApps: {\n        get({ settingsCopy }) {\n          return Object.entries(settingsCopy.actions).reduce((result, [flag, list]) => {\n            list.forEach(guid => {\n              const item = result.find(({ guid: id }) => id === guid)\n              if (item) {\n                item[flag] = true\n              } else {\n                result.push({ [flag]: true, guid })\n              }\n            })\n            return result\n          }, [])\n        },\n        set(apps) {\n          const actions = apps.reduce(\n            (result, app) => {\n              this.applicationActions.forEach(({ value: flag }) => {\n                if (app[flag]) {\n                  result[flag].push(app.guid)\n                }\n              })\n              return result\n            },\n            { reject: [], block: [], flag: [] },\n          )\n          this.$set(this.settingsCopy, 'actions', actions)\n        },\n      },\n    },\n\n    watch: {\n      selectedTab() {\n        // when switching from custom apps reset it's view\n        if (this.$refs.customRules) this.$refs.customRules.reset()\n      },\n    },\n  }\n</script>\n<style>\n  .ac-tab-items {\n    overflow: visible;\n    background-color: transparent;\n  }\n\n  .ac-tab-items,\n  .ac-tab-custom-rules,\n  .ac-tab-applications {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n  }\n\n  .ac-tab-items .v-window__container {\n    flex: 1;\n  }\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}