<!--
  AutoInterval component used for transforming seconds to hours
  min_value: 1 hour
  max_value: 365 days * 24 hours = 8760 hours
  keep in sync with backend checks
-->
<template>
  <ValidationProvider v-slot="{ errors }" rules="min_value:1|max_value:8760|integer">
    <u-text-field
      v-model="toHours"
      type="number"
      min="1"
      max="8760"
      :label="$t('auto_interval')"
      :disabled="disabled"
      :suffix="$tc('hours', 2).toLowerCase()"
      :error-messages="errors"
    >
      <template v-if="errors.length" #append><u-errors-tooltip :errors="errors" /></template>
    </u-text-field>
  </ValidationProvider>
</template>
<script>
  import { ValidationProvider } from 'vee-validate'

  export default {
    components: { ValidationProvider },
    props: {
      value: { type: Number, default: undefined },
      disabled: { type: Boolean, default: undefined },
    },
    computed: {
      toHours: {
        get() {
          return this.value / 3600
        },
        set(v) {
          this.$emit('input', parseFloat(v) * 3600)
        },
      },
    },
  }
</script>
