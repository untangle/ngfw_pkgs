<template>
  <div class="d-flex flex-column flex-grow-1">
    <div class="d-flex align-center my-2">
      <v-checkbox v-model="bypassed" :label="$vuntangle.$t('bypassed')" class="pa-0 my-0 mr-4" hide-details />
    </div>

    <report-grid :report="reports[0]" :custom-conditions="queryConditions" v-on="$listeners" />
  </div>
</template>
<script>
  import { VCheckbox } from 'vuetify/lib'
  import ReportGrid from '../components/ReportGrid.vue'
  import viewsMixin from './viewsMixin'

  export default {
    components: { VCheckbox, ReportGrid },
    mixins: [viewsMixin],

    data() {
      return {
        fetching: true,
        bypassed: false,
      }
    },

    computed: {
      /**
       * Adds custom condition based on `bypassed` field
       * @param {Object} vm
       * @param {Boolean} vm.bypassed
       * @returns {Array<QueryCondition>}
       */
      queryConditions: ({ bypassed }) => {
        // Only add condition if `bypassed` is true
        if (bypassed === true) {
          return [
            {
              column: 'bypassed',
              operator: 'EQ',
              value: true,
            },
          ]
        }
        // Return an empty array or other conditions when `bypassed` is false
        return []
      },
    },
  }
</script>
