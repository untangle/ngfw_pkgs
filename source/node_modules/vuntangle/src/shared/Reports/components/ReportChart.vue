<template>
  <v-card v-if="report" outlined class="d-flex flex-column">
    <v-card-title :class="`py-0 subtitle-1 ${$vuntangle.theme === 'dark' ? '' : 'primary--text'}`">
      <span class="py-2 font-weight-medium">{{ $vuntangle.$t(report.title) }}</span>
      <v-spacer />
      <v-btn icon @click="fetchData"><v-icon>mdi-refresh</v-icon></v-btn>
    </v-card-title>
    <v-divider />
    <div v-if="fetching || data.length" class="d-flex">
      <div class="d-flex flex-colum flex-grow-1" :style="withPieGrid ? 'flex-basis: 50%' : ''">
        <u-chart-stock :fetching="fetching" :options="options" style="height: 320px" />
      </div>
      <v-divider v-if="!fetching && withPieGrid" vertical class="mx-1 flex-grow-0" />
      <report-chart-pie-grid
        v-if="!fetching && withPieGrid"
        :data="data"
        :report="report"
        class="d-flex"
        style="flex-basis: 50%"
        @refresh="fetchData"
      >
      </report-chart-pie-grid>
    </div>
    <div v-else class="d-flex align-center justify-center text-caption" style="height: 320px">
      {{ $vuntangle.$t('no_data_available') }}
    </div>
  </v-card>
  <div v-else style="text-align: center">{{ $vuntangle.$t('report_not_found') }}</div>
</template>
<script>
  import { VCard, VCardTitle, VSpacer, VDivider } from 'vuetify/lib'
  import reportMixin from './reportMixin'
  import ReportChartPieGrid from './ReportChartPieGrid.vue'

  export default {
    components: { VCard, VCardTitle, VSpacer, VDivider, ReportChartPieGrid },
    mixins: [reportMixin],
  }
</script>
