<template>
  <v-overlay class="schema-errors">
    <v-card light class="fill-height d-flex flex-column align-stretch" color="yellow lighten-4">
      <v-card-title>{{ service }} Invalid Settings</v-card-title>
      <v-card-subtitle>Modifying this settings may lead to unpredictable results</v-card-subtitle>
      <v-card-text>
        <div v-for="(error, idx) in errors" :key="idx" class="red--text text--darken-2 font-weight-medium text-body-1">
          &bull; {{ error.stack }}
        </div>
      </v-card-text>
      <v-divider />
      <v-card-text class="d-flex" style="overflow-y: auto">
        <div style="width: 50%" class="d-flex flex-column">
          <h3 class="mb-4">Provided settings</h3>
          <pre style="font-size: smaller; line-height: 1.2; font-weight: bold">{{ settings }}</pre>
        </div>
        <div style="width: 50%" class="d-flex flex-column">
          <h3 class="mb-4">Validation schema</h3>
          <pre style="font-size: smaller; line-height: 1.2; font-weight: bold">{{ schema }}</pre>
        </div>
      </v-card-text>
      <v-spacer />
      <v-card-actions>
        <v-spacer />
        <u-btn :small="false" @click="$emit('update:errors', undefined)">Close</u-btn>
      </v-card-actions>
    </v-card>
  </v-overlay>
</template>
<script>
  import { VOverlay, VCard, VCardTitle, VCardSubtitle, VCardText, VSpacer, VCardActions, VDivider } from 'vuetify/lib'
  export default {
    components: { VOverlay, VCard, VCardTitle, VCardSubtitle, VCardText, VSpacer, VCardActions, VDivider },
    props: {
      settings: { type: Object, default: () => ({}), required: true },
      schema: { type: Object, default: () => ({}), required: true },
      service: { type: String, default: undefined, required: true },
      errors: { type: Array, default: undefined, required: true },
    },
  }
</script>
<style lang="scss">
  .schema-errors {
    .v-overlay__content {
      width: 80%;
      height: 80%;
      max-height: 800px;
      max-width: 1200px;
    }
  }
</style>
