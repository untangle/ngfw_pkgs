<!--
TimeSelector
Used for selecting the auto upgrades time using AM/PM
-->
<template>
  <div class="d-flex flex-row">
    <!-- HOUR -->
    <u-select
      v-model="h"
      :disabled="disabled"
      :items="[...Array.from({ length: 12 }, (_, i) => i++)]"
      :label="$tc('hours', 1)"
      class="mr-1"
    >
      <template #selection="data">{{ leadingZero(data.item) }}</template>
      <template #item="data">
        <v-list-item-content>
          <v-list-item-title v-text="leadingZero(data.item)" />
        </v-list-item-content>
      </template>
    </u-select>
    <!-- MINUTE -->
    <u-select
      v-model="m"
      :disabled="disabled"
      :items="[...Array.from({ length: 60 }, (_, i) => i++)]"
      :label="$tc('minutes', 1)"
      class="mr-1"
    >
      <template #selection="data">{{ leadingZero(data.item) }}</template>
      <template #item="data">
        <v-list-item-content>
          <v-list-item-title v-text="leadingZero(data.item)" />
        </v-list-item-content>
      </template>
    </u-select>
    <!-- 12-HOUR AM/PM -->
    <u-select v-model="meridian" :disabled="disabled" :items="['AM', 'PM']"></u-select>
  </div>
</template>
<script>
  export default {
    props: {
      hour: {
        type: Number,
        default: 0,
      },
      minute: {
        type: Number,
        default: 0,
      },
      disabled: {
        type: Boolean,
        default: false,
      },
    },

    computed: {
      h: {
        get() {
          return this.hour % 12
        },
        set(v) {
          this.$emit('update:hour', this.meridian === 'AM' ? v : v + 12)
        },
      },
      m: {
        get() {
          return this.minute
        },
        set(v) {
          this.$emit('update:minute', v)
        },
      },
      meridian: {
        get() {
          return this.hour < 12 ? 'AM' : 'PM'
        },
        set(v) {
          this.$emit('update:hour', v === 'AM' ? this.h : this.h + 12)
        },
      },
    },

    methods: {
      // adds a leading 0 for values under 10
      leadingZero(v) {
        return v < 10 ? '0' + v : '' + v
      },
    },
  }
</script>
