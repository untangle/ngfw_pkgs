<template>
  <v-container :fluid="!!classicView" :class="`${classicView ? 'pa-4 ' : ''}shared-cmp d-flex flex-column flex-grow-1`">
    <div class="d-flex align-center">
      <h1 v-if="classicView" class="headline">{{ $vuntangle.$t('automatic_upgrades') }}</h1>
      <h2 v-else class="font-weight-light">{{ $vuntangle.$t('automatic_upgrades') }}</h2>
      <v-spacer />
      <slot name="actions" :new-settings="settingsCopy" :is-dirty="isDirty" />
    </div>
    <v-divider class="my-2" />
    <u-section v-if="!!$slots['extra-fields']">
      <slot name="extra-fields" />
    </u-section>
    <v-checkbox v-model="settingsCopy.enabled" :label="$t('automatically_install_upgrades')" />
    <v-card flat class="mb-4">
      <p>{{ $t('auto_upgrades_schedule_text') }}</p>
      <v-row>
        <v-col cols="3">
          <!-- day of week -->
          <u-select
            v-model="settingsCopy.dayOfWeek"
            :disabled="!settingsCopy.enabled"
            :label="$t('week_day')"
            :items="daysOfWeek"
          >
            <template #selection="data">
              {{ $t(data.item.text) }}
            </template>
            <template #item="data">
              <v-list-item-content>
                <v-list-item-title>{{ $t(data.item.text) }}</v-list-item-title>
              </v-list-item-content>
            </template>
          </u-select>
        </v-col>
        <v-col cols="3">
          <!-- time of day -->
          <time-selector
            :hour.sync="settingsCopy.hourOfDay"
            :minute.sync="settingsCopy.minuteOfHour"
            :disabled="!settingsCopy.enabled"
          />
        </v-col>
      </v-row>
      <slot name="boxActions" :upgradeData="settingsCopy" />
    </v-card>
  </v-container>
</template>
<script>
  import { VContainer, VSpacer, VDivider } from 'vuetify/lib'
  import settingsMixin from '../settingsMixin'
  import TimeSelector from './TimeSelector.vue'
  export default {
    components: { VContainer, VSpacer, VDivider, TimeSelector },
    mixins: [settingsMixin],
    data() {
      return {
        daysOfWeek: [
          { text: 'weekday.sunday', value: 0 },
          { text: 'weekday.monday', value: 1 },
          { text: 'weekday.tuesday', value: 2 },
          { text: 'weekday.wednesday', value: 3 },
          { text: 'weekday.thursday', value: 4 },
          { text: 'weekday.friday', value: 5 },
          { text: 'weekday.saturday', value: 6 },
        ],
      }
    },
  }
</script>
