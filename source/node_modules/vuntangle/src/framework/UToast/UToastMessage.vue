<template>
  <v-snackbar
    :value="visible"
    :bottom="y === 'bottom'"
    :color="color"
    :left="x === 'left'"
    :multi-line="mode === 'multi-line'"
    :right="x === 'right'"
    :timeout="timeout"
    :top="y === 'top'"
    :vertical="mode === 'vertical'"
    absolute
    @input="closeDialog"
  >
    <div class="toast-message" v-html="text" />
    <template #action="{ attrs }">
      <v-btn dark text v-bind="attrs" @click="closeDialog">{{ $vuntangle.$t('close') }}</v-btn>
    </template>
  </v-snackbar>
</template>
<script>
  import { VSnackbar, VBtn } from 'vuetify/lib'

  export default {
    components: { VSnackbar, VBtn },
    props: {
      // the id of the toast message, used for removing the toast from the store
      id: { type: Number, required: true },
      // the backgroud color for the toast background. Can have any color or some presets like: success, info, error, etc.
      color: { type: String, required: false, default: 'info' },
      // used to display the text multi-line (useful for mobile )
      mode: { type: String, required: false, default: '' },
      // flag to show/hide the toast
      showDialog: { type: Boolean, required: true },
      // the text to display in the toast
      text: { type: String, required: true },
      // sets how much the toast is visible
      timeout: { type: Number, required: false, default: 5000 },
      // used for the toast position, on the X axis. Possible values: left, right
      x: { type: String, required: false, default: null },
      // used for the toast position, on the Y axis. Possible values: top, bottom
      y: { type: String, required: false, default: 'top' },
    },
    data() {
      return {
        visible: true,
      }
    },
    watch: {
      // watcher for visible attribute - when toast expires, it sets visible to false - need to pass that to the parent as well
      visible() {
        if (!this.visible) {
          this.closeDialog()
        }
      },
      showDialog() {
        this.visible = this.showDialog
      },
    },
    methods: {
      closeDialog() {
        this.$emit('close-dialog', this.id)
      },
    },
  }
</script>
<style lang="scss">
  .toast-message {
    min-width: 300px;
    white-space: pre-line;
  }
</style>
