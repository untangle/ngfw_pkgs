<template>
  <span>
    <span>{{ name }}</span>
    <v-tooltip v-if="hasGroupConditions" top transition="none">
      <template #activator="{ on, attrs }">
        <v-btn
          v-bind="attrs"
          icon
          small
          class="ml-2"
          style="position: absolute; right: 4px; top: -1px"
          v-on="on"
          @click.stop.prevent="onToggleGroupConditionsColumn"
        >
          <v-icon>mdi-alpha-g-box</v-icon>
        </v-btn>
      </template>
      <span>{{ $vuntangle.$t('toggle_group_conditions_column') }}</span>
    </v-tooltip>
  </span>
</template>
<script>
  import Vue from 'vue'
  export default Vue.extend({
    computed: {
      name: ({ params }) => params.value,
      hasGroupConditions: ({ params }) => !!params.data.group,
    },
    methods: {
      onToggleGroupConditionsColumn() {
        const col = this.params.columnApi.getColumn('group-conditions')
        if (!col) return
        this.params.columnApi.setColumnVisible('group-conditions', !col.visible)
        this.params.api.resetRowHeights()
      },
    },
  })
</script>
